ERC-3643、ERC-1400 和 ERC-20 是 Ethereum 區塊鏈上的代幣標準，專為不同用途設計。ERC-3643（由 Tokeny 的 T-REX 協議發展而來）是一個專注於合規性安全代幣（security tokens）的標準，特別適合真實世界資產（RWA）代幣化。它被設計為包含 ERC-1400 和 ERC-20 的大部分功能，並在合規性、許可控制和靈活性上進行增強。以下通過分析 ABI（Application Binary Interface）調用，比較這三個標準的功能，並以列表形式呈現。

### 總體功能比較
- *ERC-20*: 基本的可互換代幣標準，廣泛用於簡單代幣（如穩定幣或治理代幣）。功能簡單，無內建合規性，適用於非監管場景。
- *ERC-1400*: 安全代幣標準，支援合規性（KYC/AML、轉移限制）和部分可互換性（partially fungible tokens）。適合需要監管的 RWA 代幣化，但需要 off-chain 數據支持。
- *ERC-3643*: 進階安全代幣標準，內建合規性和數位身份（ONCHAINID），支援自動化合規檢查和跨平台互操作性。包含 ERC-1400 和 ERC-20 的核心功能，並針對 RWA 代幣化進行優化。

### ABI 調用比較
以下列表比較三個標準的核心 ABI 函數（基於標準的公開規範和 Tokeny 文件）。我將列出主要函數、其功能，以及它們在每個標準中的存在情況。注意：ERC-3643 和 ERC-1400 的 ABI 包含 ERC-20 的基礎功能，但增加了安全代幣特定的控制。


| *函數名稱* | *功能描述* | *ERC-20* | *ERC-1400* | *ERC-3643* |
|--------------|--------------|------------|--------------|--------------|
| *totalSupply()* | 返回代幣總供應量 | ✅ | ✅ | ✅ |
| *balanceOf(address)* | 查詢指定地址的代幣餘額 | ✅ | ✅ | ✅ |
| *transfer(address, uint256)* | 將代幣從調用者轉移到指定地址 | ✅ | ✅ | ✅ |
| *approve(address, uint256)* | 允許指定地址花費一定數量的代幣 | ✅ | ✅ | ✅ |
| *transferFrom(address, address, uint256)* | 從授權地址轉移代幣 | ✅ | ✅ | ✅ |
| *allowance(address, address)* | 查詢授權花費的剩餘代幣額 | ✅ | ✅ | ✅ |
| *transferWithData(address, uint256, bytes)* | 轉移代幣並附加數據（如合規資訊） | ❌ | ✅ | ✅ |
| *canTransfer(address, uint256)* | 檢查轉移是否符合合規規則 | ❌ | ✅ | ✅ |
| *canTransferFrom(address, address, uint256)* | 檢查授權轉移是否符合合規規則 | ❌ | ✅ | ✅ |
| *issue(address, uint256, bytes)* | 發行新代幣並分配給地址 | ❌ | ✅ | ✅ |
| *redeem(uint256, bytes)* | 贖回（銷毀）代幣 | ❌ | ✅ | ✅ |
| *forceTransfer(address, address, uint256, bytes)* | 強制轉移代幣（用於合規或恢復） | ❌ | ✅ | ✅ |
| *setTokenExtension(address)* | 設置合規擴展（如身份驗證合約） | ❌ | ✅ | ✅ |
| *checkOnChainID(address)* | 驗證數位身份（ONCHAINID）是否符合資格 | ❌ | ❌ | ✅ |
| *setCompliance(address)* | 設置合規模組（如 KYC/AML 規則） | ❌ | ✅ | ✅ |
| *pause() / unpause()* | 暫停或恢復代幣轉移 | ❌ | ✅ | ✅ |
| *burn(address, uint256)* | 從指定地址銷毀代幣 | ❌ | ✅ | ✅ |
| *setPartition(bytes32, address, uint256)* | 管理部分可互換代幣的分區 | ❌ | ✅ | ✅ |
| *transferByPartition(bytes32, address, uint256, bytes)* | 按分區轉移代幣，帶合規數據 | ❌ | ✅ | ✅ |
| *operatorTransferByPartition(bytes32, address, address, uint256, bytes, bytes)* | 授權操作者按分區轉移代幣 | ❌ | ✅ | ✅ |
| *setIdentityRegistry(address)* | 設置數位身份登記合約 | ❌ | ❌ | ✅ |
| *addOnChainID(address, bytes)* | 添加數位身份到白名單 | ❌ | ❌ | ✅ |
| *removeOnChainID(address)* | 從白名單移除數位身份 | ❌ | ❌ | ✅ |
| *isControllable()* | 檢查代幣是否可由發行人控制 | ❌ | ✅ | ✅ |
| *setValuation(bytes32, uint256)* | 嵌入資產估值數據到代幣 | ❌ | ❌ | ✅ |

### 詳細分析
1. *ERC-20 功能*：
   - 提供基礎代幣功能（如轉移、授權、餘額查詢），適合簡單代幣。
   - 無內建合規性，需依賴外部合約或 off-chain 檢查。
   - ABI 簡單，僅 6 個核心函數，易於整合但功能有限。

2. *ERC-1400 功能*：
   - 包含 ERC-20 所有功能，並增加安全代幣特性。
   - 新增合規相關函數（如 canTransfer、setCompliance），支援 KYC/AML 檢查。
   - 支援部分可互換代幣（partitions），允許不同類型資產（如債券分期）在同一合約中管理。
   - 新增發行（issue）、贖回（redeem）、強制轉移（forceTransfer）等功能，適合監管環境。
   - 限制：合規檢查依賴 off-chain 數據或外部合約，增加複雜性。

3. *ERC-3643 功能*：
   - *包含 ERC-1400 和 ERC-20 功能*：幾乎所有 ERC-1400 的 ABI 調用（如 transferWithData、forceTransfer）都在 ERC-3643 中支援，兼容 ERC-20 的基礎功能。
   - *增強功能*：
     - *數位身份（ONCHAINID）*：新增 checkOnChainID、setIdentityRegistry 等函數，內建數位身份驗證，直接在鏈上執行合規檢查（如 KYC/AML），無需 off-chain 依賴。
     - *資產估值嵌入*：setValuation 允許將 RWA 估值數據（如第三方機構提供的價格）嵌入代幣，增強透明性和可交易性。
     - *自動合規*：內建合規模組（setCompliance）和白名單管理（addOnChainID、removeOnChainID），簡化監管流程。
   - *優勢*：專為 RWA 代幣化設計，支援多鏈（EVM 兼容），並與 T-REX 平台深度整合（如文件所述）。提供更高自動化和互操作性，減少外部依賴。

### ERC-3643 是否包含 ERC-1400 和 ERC-20 功能？
- *對 ERC-20*：是，ERC-3643 完全兼容 ERC-20 的核心功能（transfer、approve 等），可與任何支援 ERC-20 的錢包或交易所互動。
- *對 ERC-1400*：幾乎完全包含。ERC-3643 繼承了 ERC-1400 的安全代幣功能（如分區管理、合規檢查），並增強了數位身份和自動合規功能。唯一差別是 ERC-1400 的一些實現可能依賴特定 off-chain 邏輯，而 ERC-3643 將這些功能內建到合約中（如 ONCHAINID）。
- *獨有功能*：ERC-3643 提供了 setValuation 和身份管理函數，這些是 ERC-1400 和 ERC-20 沒有的，專為 RWA 代幣化（如房地產、藝術品）優化。

### 香港及商業應用考慮
- *香港監管*：在香港，安全代幣受證券及期貨事務監察委員會（SFC）監管。ERC-3643 的內建合規性（KYC/AML、身份驗證）更適合滿足 SFC 的虛擬資產要求，相比 ERC-1400 的 off-chain 依賴更具優勢。
- *商業採用*：ERC-3643 已代幣化超過 280 億美元資產（截至 2025 年），尤其在房地產、私募股權和藝術品代幣化中應用廣泛（參考 Tokeny 案例）。ERC-1400 雖有應用（如 Polymath），但因複雜性和新標準崛起，採用率稍低。

### 結論
ERC-3643 確實包含 ERC-20 和 ERC-1400 的大部分功能，並通過內建數位身份和估值嵌入等增強功能，針對 RWA 代幣化提供更高效和合規的解決方案。ABI 比較顯示，ERC-3643 不僅兼容基礎功能，還新增了專為監管和 RWA 設計的進階功能，使其更適合現代商業應用。


